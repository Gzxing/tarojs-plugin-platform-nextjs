const path = require('path')

/** @type {import('next').NextConfig} */
const nextConfig = {
    env: {
    <%_ Object.keys(env).forEach(function (key) { _%>
        <%_ if (key !== 'NODE_ENV') { _%>
        <%- key %>: <%- env[key] %>,
        <%_ } _%>
    <%_ }) _%>
    },
    sassOptions: {
        <%_ if (prependData) { _%>
        prependData: <%- prependData %>,
        <%_ } _%>
        <%_ if (includePaths) { _%>
        includePaths: <%- includePaths %>
        <%_ } _%>
    },
    <%_ if (rewrites) { _%>
    async rewrites() {
        return {
            beforeFiles:  [
            <%_ rewrites.forEach(function (rewrite) { _%>
                {
                    source: '<%- rewrite.source %>',
                    <%_ if (rewrite.has) { _%>
                    has: [
                        <%_ rewrite.has.forEach(function (item) { _%>
                        {
                            type: '<%- item.type %>',
                            key: '<%- item.key %>',
                            value: '<%- item.value %>'
                        },
                        <%_ }) _%>
                    ],
                    <%_ } _%>
                    destination: '<%- rewrite.destination %>'
                },
            <%_ }) _%>
            ]
        }
    }
    <%_ } _%>
}
  
module.exports = nextConfig
